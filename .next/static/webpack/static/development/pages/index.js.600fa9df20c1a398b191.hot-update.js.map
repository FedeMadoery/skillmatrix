{"version":3,"file":"static/webpack/static/development/pages/index.js.600fa9df20c1a398b191.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from 'react';\nimport {Card, Button, Confirm} from 'semantic-ui-react';\nimport Layout from '../components/Layout';\nimport { Link } from '../routes';\nimport factory from '../ethereum/factory';\n\nexport default class CampaignIndex extends React.Component {\n\n    state = {\n\n        campaigns: this.props.campaigns,\n        open: false,\n        address: ''\n    }\n\n    static async getInitialProps() {\n\n        const campaigns = await factory.methods.getDeployedCampaigns().call();\n        factory.events['NewCampaign']()\n            .on(\"data\", CampaignIndex.dataCallBack)\n            .on(\"error\",CampaignIndex.errorCallBack);\n\n\n        var instructorEvent = factory.events.NewCampaign({},{fromBlock: 0, toBlock: 'latest'});\n        instructorEvent.on('data', function(event) {\n            console.log(event.returnValues);\n            this.setState({open: true, address: err})\n          }).on('error',  this.setState({open: true, address: err})\n          );\n\n\n\n\n        return {campaigns};\n    }\n\n    componentWillMount() {\n\n       // this.setState({campaings: this.props.campaigns});\n       // this.setState({open: true, address: 'dafsdfd'})\n\n\n\n        // factory.events.NewCampaign({}, (error, data) => {\n        //     if (error)\n        //         this.setState({open: true, address: error})\n        //     else\n        //         this.setState({open: true, address: data})\n        // });\n\n    }\n\n\n    static errorCallBack = (err) => {\n        this.setState({open: true, address: err})\n    }\n\n    static dataCallBack = (data) =>{\n        //console.log(data)\n       // this.setState({...campaings, data});\n        this.setState({open: true, address: data})\n    }\n\n    renderCampaigns() {\n        const items = this.state.campaigns.map(address => {\n            return {\n                header: address,\n                description:(\n                  <Link route={`/campaigns/${address}`}>\n                      <a>View Campaign</a>\n                  </Link>\n                ),\n                fluid: true\n            };\n        });\n\n        return <Card.Group items={items}/>\n    }\n\n    createCampaign() {\n        //Router.pushRoute('/campaigns/new');\n    }\n\n    render() {\n        return (\n\n            <Layout>\n                <div>\n                    <link\n                        rel=\"stylesheet\"\n                        href=\"//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css\"\n                    />\n\n                    <h3>Open Campaign</h3>\n\n\n                    <Link route=\"/campaigns/new\">\n                        <a>\n                            <Button\n                                floated=\"right\"\n                                content=\"Create Campaign\"\n                                icon=\"add circle\"\n                                primary\n                            />\n                        </a>\n                    </Link>\n\n\n                    {this.renderCampaigns()}\n\n                    <Confirm\n                        open={this.state.open}\n                        content={this.state.address}\n                        onCancel={() => this.setState({ open: false })}\n                        onConfirm={() => this.setState({ open: false })}\n                    />\n                </div>\n\n            </Layout>\n        );\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAEA;AAEA;AACA;AACA;AAJA;AACA;;;;;;AA2BA;AAGA;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAaA;AACA;AACA;AACA;AACA;AACA;AAAA;AAIA;AAPA;AASA;AAEA;AAAA;AAAA;AACA;;;AAEA;AAEA;;;AAEA;AAAA;AACA;AAAA;AAKA;AACA;AAFA;AAQA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AAaA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;AAUA;;;;;;;;;;;;;AAvGA;AACA;;AADA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AA5BA;AACA;AADA;AAgDA;AAAA;AAAA;AAAA;AACA;AACA;AAlDA;AAoDA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAxDA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}